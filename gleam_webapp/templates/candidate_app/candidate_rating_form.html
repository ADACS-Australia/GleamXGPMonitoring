{% extends 'candidate_app/header.html' %}

{% block content %}

<title>Candidate Rating ID:{{ candidate.id }} </title>
<h2>Candidate Rating ID:{{ candidate.id }}</h2>
{% if candidate %}
<div class="row fluid">

  <div class="col-md-8">
    <h3>Current Candidate</h3>
    <div class="card">
        <header class="card-header">
          <p class="card-header-title">
            ID:{{ candidate.id }}
          </p>
        </header>
        {% if candidate.png_path %}
        <div class="card-image">
          <figure class="image is-4by3">
            <img src="{{candidate.png_path.url}}" alt="Diagnostic Plot for {{candidate.id}}" onClick="window.open(this.src)">
          </figure>
        </div>
        {% endif %}
        <div class="card-content">
            <table>
                <tr>
                  <td>Observation ID</td>
                  <td>{{ candidate.observation_id.observation_id }}</td>
                </tr>
                <tr>
                  <td>Time</td>
                  <td>{{ candidate.observation_id.starttime }}</td>
                </tr>
                <tr>
                  <td>Frequency (Hz)</td>
                  <td>{{ candidate.FREQ }}</td>
                </tr>
                <tr>
                  <td>Location (deg)</td>
                  <td>{{ candidate.ra_dec }}, {{ candidate.dec_dec}}</td>
                </tr>
                <tr>
                  <td>Location (HH:MM:SS.SS, DD:MM:SS.SS)</td>
                  <td>{{ candidate.ra_hms }}, {{ candidate.dec_dms }}</td>
                </tr>
                <tr>
                  <td>Central sep (arcmin)</td>
                  <td>{{ candidate.cent_sep }}</td>
                </tr>
                <tr>
                  <td>Peak Brightness (mJy)</td>
                  <td>{{ candidate.ratio }}</td>
                </tr>
                <tr>
                  <td>Match Source</td>
                  <td>{{ candidate.match }}</td>
                </tr>
                <tr>
                  <td>Match Sep (arcmin)</td>
                  <td>{{ candidate.sep_deg }}</td>
                </tr>
                <tr>
                  <td>Residual Diff</td>
                  <td></td>
                </tr>
                <tr>
                  <td>Match Flux Ratio</td>
                  <td></td>
                </tr>
                <tr>
                  <td>Primary Beam</td>
                  <td>{{ candidate.beam }}</td>
                </tr>
              </table>
        </div>
      </div>
  </div>

  <div class="col-md-3">
    <h3 class="subtitle is-3">Rate Current Candidate</h3>
    <form action="{% url 'candidate_update_rating' id=candidate.id %}" method="post">
      {% csrf_token %}
      <div class="field">
      <!-- <label for="rfi">Is RFI?</label>
      <input type="checkbox"  id='rfi' value='True' name="rfi"><br> -->
      <label for="cand_type">Choose candidate type:</label>

      <select name="cand_type" id="cand_type">
        <option value="T">Transient</option>
        <option value="A">Airplane</option>
        <option value="RFI">RFI</option>
        <option value="SL">Sidelobe</option>
      </select>
      </div>
      <div class="field">
      <label for="rating">Rating from 1(noise) to 5(clear candidate){% if rating %}(currently {{rating.rating}}){% endif %}</label>
      <div>
        <input type="submit" class="button is-medium" name="rating" value="1">
        <input type="submit" class="button is-medium" name="rating" value="2">
        <input type="submit" class="button is-medium" name="rating" value="3">
        <input type="submit" class="button is-medium" name="rating" value="4">
        <input type="submit" class="button is-medium" name="rating" value="5">
      </div>
      </div>
      <div class="field">
      <label for="rating">Notes (is it a known source?)</label>
      <input type="text" id="notes" name="notes" value="{{candidate.notes}}"><br>
      </div>
      <input type="hidden" name="id" value="">
      <input type="hidden" name="username" value="{{user}}">
    </form>
    <button class="button is-link" onclick="window.history.go(-1)">Back to previous</button>
  </div>
</div>
{% else %}
<p>Candidate not Found!</p>
{% endif %}
{% endblock %}